<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>
    <h1>inside html file</h1>
    <div id="dogs"></div>

    <form id="newdog" onsubmit="submitDog()">
        <label for="fname">First name:</label><br>
        <input type="text" id="dogname" value="Runa"><br><br>

        <label for="caretaker">Caretakers First name:</label><br>
        <input type="text" id="caretakerName" value="R"><br><br>

        <label for="age">age</label><br>
        <input type="text" id="dogage" value="4"><br><br>

        <label for="password">password</label><br>
        <input type="password" id="password" value="password"><br><br>

        <input type="submit" value="Submit">
      </form>



    <script>
         var selectedForm=document.getElementById("newdog");
         selectedForm.addEventListener("submit", (e) => {
         e.preventDefault();
            let dogname = document.getElementById("dogname");
            let dogage = document.getElementById("dogage");
            let caretaker = document.getElementById("caretakerName");
            let password = document.getElementById("password");
            console.log("-------------")
            console.log(dogname.value)
            console.log(dogage.value)
            console.log(caretaker.value)
            console.log(password.value)
            console.log("-------------")

            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            var raw = JSON.stringify({
            "data": {
                "name": dogname.value,
                "caretaker": dogage.value,
                "age": caretaker.value,
                "password": password.value
            }
            });

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            console.log(requestOptions.body)

            fetch("http://localhost:3001/products", requestOptions)
           .then(result => console.log(result))
            .catch(error => console.log('error', error));

            // handle submit
            });


        function submitDog(){
            console.log("this is submitting!")
            var selectedForm=document.getElementById("newdog");
            selectedForm.submit();

        }

        // fetch("/products/banana/apple/1231")
        //     .then(data => data.json())
        //     .then(cleanedData => {

        //         var html = ""
        //         for (let i = 0; i < cleanedData.length; i++) {
        //             html = html + `<div class="card" style="width: 18rem;">
        //             <img class="card-img-top" src="${cleanedData[i].picture}" alt="Card image cap">
        //             <div class="card-body">
        //             <h5 class="card-title">${cleanedData[i].name}e</h5>
        //             <p class="card-text">${cleanedData[i].id}</p>
        //             <a href="#" class="btn btn-primary">Go somewhere</a>
        //          </div>
        //         </div>`
        //         }
        //         document.getElementById("dogs").innerHTML = html
        //     }).catch(err=>{
        //         console.log(err)
        //     })
    </script>
</body>

</html>